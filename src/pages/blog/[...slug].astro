---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';


export async function getStaticPaths() {
  const blogEntries = await getCollection('blog');
  return blogEntries.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();

// 简单的日期格式化
const formattedDate = entry.data.date.toISOString().split('T')[0];
---

<Layout title={entry.data.title}>
  
    <main class="w-full max-w-[800px] px-6 py-12">
      <!-- 文章头部卡片风格 -->
      <div class="bg-white border-4 border-[#2f2f2f] p-8 mb-10 shadow-[8px_8px_0px_0px_#2f2f2f]">
        <h1 class="text-2xl md:text-4xl mb-4 text-[#2f2f2f] leading-tight font-bold" style="font-family: 'Press Start 2P', cursive;">{entry.data.title}</h1>
        <div class="flex justify-between items-center text-xs md:text-sm text-gray-500 font-mono border-t-2 border-dashed border-gray-300 pt-4 mt-4">
          <span>{formattedDate}</span>
          <span class="text-[#ff6b6b]">By {entry.data.author}</span>
        </div>
      </div>

      <!-- Markdown 内容 -->
      <article class="prose prose-slate prose-lg max-w-none bg-white/90 p-8 border-2 border-[#2f2f2f] shadow-[4px_4px_0px_0px_#4ecdc4]">
        <Content />
      </article>

      <div class="mt-8 text-center">
        <a href="/" class="inline-block bg-[#ff6b6b] text-white px-6 py-3 border-4 border-[#2f2f2f] shadow-[4px_4px_0px_0px_#2f2f2f] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_#2f2f2f] active:translate-y-[4px] active:shadow-none transition-all font-bold">
          &lt;&lt; BACK
        </a>
      </div>
    </main>
  
</Layout>

<style is:global>
  /* 简单的 Typography 样式，适配 Retro 风格 */
  article h1, article h2, article h3 {
    font-family: 'Press Start 2P', cursive;
    margin-top: 2rem;
    margin-bottom: 1rem;
    font-size: 1.2em; /* Press Start 2P 比较大，缩小一点 */
  }
  article p {
    margin-bottom: 1.5rem;
    line-height: 1.8;
  }
  article ul {
    list-style-type: square;
    margin-left: 1.5rem;
    margin-bottom: 1.5rem;
  }
  /* Inline code style */
  article :not(pre) > code {
    background-color: #eee;
    padding: 0.2rem 0.4rem;
    font-family: monospace;
  }
  /* Code block style - ensure no conflict with Shiki/Prism */
  article pre {
    background-color: #2f2f2f;
    color: #4ecdc4;
    padding: 1rem;
    overflow-x: auto;
    margin-bottom: 1.5rem;
    border: 2px solid #000;
  }
  article pre code {
    background-color: transparent;
    color: inherit;
    padding: 0;
  }
</style>
